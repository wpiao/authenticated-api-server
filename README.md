# authenticated-api-server - 5/3/2020
This is an express server with protected routes. This app has implemented basic authentication, OAuth, bearer authentication, and ACL to protect the API routes. This app used swagger inspector to test all protected routes and it performed as expected.

## How to start this app
1. Run command 'npm install' to install all required dependencies.
2. Set up .env file. You need to change it appropriately to make this app work.
  * `PORT=3000`
  * `MONGODB_URL=<fill it with your mongoDB url>`
  * `CLIENT_ID=<fill it with your client id>`
  * `CLIENT_SECRET=<fill it with your client secret`
  * `SECRET=<fill it with your secret word>`
  * make sure you put this file on .gitignore so that not push it to github
3. Run command 'npm start' or 'npm run start' to start the app.
4. App runs on http://localhost:3000/.

## How to use and test this app
1. Schema: `{username: { type: String, required: true }, password: { type: String, required: true}, role: String }`
2. Role:
  * user - read
  * editor - create, read, update
  * admin - create, read, update, delete
3. Post `/signup` route: send credentials based on schema to this route, it will hash the password and save the modified credentials to the database and then generate token and send it back to user for future authentication.
4. Post `/signin` route: this route use basic authentication to authenticate users. Use one of credentials you used for signup, and send post request on this route. Upon successful authentication, it will generate a token and send it back to user for future authentication.
5. Get `/test` route: this route uses token generated by basic authentication or OAuth to authenticate user. Use one of the token generated by previous request to test this route.
6. Post `/test-post` route: editor and admin have access to this route. Try credentials with different role to test this route.
7. Put `/test-put` route: editor and admin have access to this route. Try credentials with different role to test this route.
8. Patch `/test-patch` route: editor and admin have access to this route. Try credentials with different role to test this route.
9. Delete `/test-delete` route: only admin has access to this route. Try credentials with different role to test this route.